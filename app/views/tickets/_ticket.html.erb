<% colors = user_color(ticket.author) %>
<%= turbo_frame_tag dom_id(ticket) do %>
  <div class="rounded-xl p-4 shadow-sm border-2 hover:shadow-md transition-shadow cursor-move"
       style="background-color: <%= colors[:bg] %>; border-color: <%= colors[:border] %>;"
       data-controller="reactions"
       data-reactions-retrospective-id-value="<%= ticket.retrospective.id %>"
       data-ticket-id="<%= ticket.id %>">
    <p class="text-sm whitespace-pre-wrap" style="color: <%= colors[:text] %>;"><%= ticket.content %></p>

    <!-- Reactions -->
    <%= render partial: 'tickets/reactions', locals: { ticket: ticket } %>

    <div class="flex justify-between items-center mt-3 pt-3 border-t" style="border-color: <%= colors[:border] %>;">
      <span class="text-xs font-medium" style="color: <%= colors[:text] %>;">
        <%= ticket.author.username %>
      </span>
      <% if ticket.author_id == Current.user.id && ticket.retrospective.current_step == 'ticket_creation' %>
        <%= button_to retrospective_ticket_path(ticket.retrospective, ticket),
                      method: :delete,
                      data: { turbo_confirm: "Are you sure?" },
                      class: "text-xs hover:underline",
                      style: "color: #{colors[:text]};" do %>
          Delete
        <% end %>
      <% end %>
    </div>
  </div>
<% end %>
